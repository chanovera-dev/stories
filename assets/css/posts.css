.site-main {
    & .container--title {
        & .content {
            & .main-title {
                padding-top: 30px;
            }
        }
    }

    & .container--posts {
        & .content {
            padding: 50px 0;
            position: relative;
            z-index:1;

            & .posts {
                display: grid;
                gap: 50px;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                place-content: start;
                grid-auto-flow: dense;

                & .post {
                    & > *:not(:last-child) {
                        margin-bottom:10px;
                    }

                    &.animate-in {
                        & .post--header {
                            & .thumbnail--wrapper {
                                & .thumbnail {
                                   animation: post-thumbnail 2s ease forwards;
                                }
                            }

                            & .post-categories {
                                & li {
                                    & a {
                                        animation: tilt-in-fwd-tr 1s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;
                                    }
                                }
                            }
                        }

                        & .post--content {

                            & .post--permalink {
                                &:before {
                                    animation: title--post--backdrop 0.6s ease-in-out forwards;
                                }

                                & .post--title {
                                    animation: title--post 0.3s ease-in-out forwards;
                                    animation-delay: 0.3s;
                                }
                            }

                            & p {
                                animation: animation-date 1s ease-in-out forwards;
                            }

                            & .date {
                                animation: animation-date 1s ease-in-out .3s forwards;
                            }

                            & .tags {
                                animation: bounce-in-right 1.5s both;
                            }
                        }
                    }

                    & .post--header {
                        & > *:not(:last-child) {
                            margin-bottom:10px;
                        }

                        & .post-categories {
                            padding: 0;
                            list-style: none;
                            display:inline-flex;
                            flex-wrap: wrap;

                            & li {
                                & a {
                                    font-size: var(--wp--preset--font-size--medium);
                                    font-weight: 500;
                                    color: var(--color-link);
                                    display:flex;
                                    align-items: center;
                                    gap:7px;
                                    flex-wrap:nowrap;
                                    transition: color .3s ease;
                                    opacity: 0;

                                    &:hover {
                                        color: var(--color-link-hover);
                                    }

                                    & svg {
                                        width: 13px;
                                        height: 13px;
                                    }
                                }
                            }
                        }

                        & .thumbnail--wrapper {
                            position: relative;
                            width: 100%;
                            aspect-ratio: 3 / 2;
                            border-radius: 2rem;
                            corner-shape: squircle;
                            overflow: hidden;

                            &:has(.thumbnail.full) {
                                aspect-ratio: 9 / 11;

                                & .thumbnail {
                                    aspect-ratio: 9 / 11;
                                }
                            }
                            
                            & .thumbnail {
                                position: absolute;
                                top: 50%; left: 50%; transform: translate(-50%, -50%);
                                width: 0;
                                height: 0;
                                aspect-ratio: 3 / 2;
                                object-fit: cover;
                                transition: filter .3s ease-in-out;
                                filter: brightness(var(--brightness-thumbnail));
                                
                                &:hover {
                                    filter: brightness(var(--brightness-thumbnail--hover));
                                }
                            }
                        }
                    }

                    & .post--content {
                        
                        & > *:not(:last-child) {
                            margin-bottom: 20px;
                        }

                        & .post--permalink {
                            display: inline-block;
                            position: relative;

                            &:before {
                                content: '';
                                position: absolute;
                                top: 50%;
                                left: 0;
                                transform: translateY(-50%);
                                width: 100%;
                                height: 120%;
                                background-color: var(--color-text-base);
                                z-index: 1;
                            }

                            & .post--title {
                                opacity: 0;
                            }
                        }

                        & p {
                            opacity: 0;
                        }

                        & .micro ~ p {
                            font-size: var(--wp--preset--font-size--x-large);
                        }

                        & .date {
                            opacity: 0;
                            font-size: var(--wp--preset--font-size--small);
                            color: #4d5f71;
                            margin-bottom: 10px;
                        }

                        & .tags {
                            display: inline-flex;
                            flex-wrap: wrap;
                            gap: 7px 10px; 

                            & a {
                                font-size: var(--wp--preset--font-size--small);
                                display: flex;
                                align-items:center;
                                gap: 7px;
                                flex-wrap: nowrap;
                                padding: 3px 10px;
                                background-color: var(--background-tags);
                                color: var(--color-tags);
                                border-radius: 1rem;
                                corner-shape: squircle;
                                transition: background-color .3s ease;
                                
                                &:hover {
                                    background-color: var(--background-tags-hover);
                                }

                                & svg {
                                    width: 13px;
                                    height: 13px;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

@media (width > 768px) {
    .site-main {
        & .container--posts {
            & .content {
                & .posts {
                    & .post {
                        &:has(.post--content .micro):nth-child(odd) {
                            grid-column: span 2;
                        }
                    }
                }
            }
        }
    }

     .archive .site-main .container--posts .content .posts .post:has(.post--content .micro):nth-child(odd) {
        grid-column: span 1;
    }
}

@media (width < 1365px) {
    .site-main {
        & .container--posts {
            & .content {
                & .posts {
                    padding-bottom: 50px;
                }
            }
        }
    }
}

@keyframes post-thumbnail {
    0%{
        width: 0;
        height: 0;
        border-radius: 50%;
        corner-shape: initial;
    }

    50% {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        corner-shape: initial;
    }
    70% {
        width: 100%;
        height: 100%;
        border-radius: 10rem;
        corner-square: squircle;
    }
    100% {
        width: 100%;
        height: 100%;
        border-radius: 2rem;
        corner-shape: squircle;
    }
}

@keyframes title--post {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes title--post--backdrop {
    0% {
        left: 0;
        right: auto;
        width: 0;
    }
    50% {
        left: 0;
        right: auto;
        width: 100%;
    }
    51% {
        left: auto;
        right: 0;
    }
    100% {
        left: auto;
        right: 0;
        width: 0;
    }
}

@keyframes animation-date {
    0% {
        opacity: 0;
        transform: translateX(-100px) scale(1.5);
    }

    50% {
        opacity: 0;
        transform: translateX(-100px) scale(1.5);
    }

    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

@keyframes tilt-in-fwd-tr {
    0% {
        transform: rotateY(20deg) rotateX(35deg) translate(200px, -200px) skew(-35deg, 10deg);
        opacity: 0;
    }

    100% {
        transform: rotateY(0) rotateX(0deg) translate(0, 0) skew(0deg, 0deg);
        opacity: 1;
    }
}

@keyframes bounce-in-right {
    0% {
        transform: translateX(200px);
        animation-timing-function: ease-in;
        opacity: 0;
    }

    38% {
        transform: translateX(0);
        animation-timing-function: ease-out;
        opacity: 1;
    }

    55% {
        transform: translateX(68px);
        animation-timing-function: ease-in;
    }

    72% {
        transform: translateX(0);
        animation-timing-function: ease-out;
    }

    81% {
        transform: translateX(32px);
        animation-timing-function: ease-in;
    }

    90% {
        transform: translateX(0);
        animation-timing-function: ease-out;
    }

    95% {
        transform: translateX(8px);
        animation-timing-function: ease-in;
    }

    100% {
        transform: translateX(0);
        animation-timing-function: ease-out;
    }
}